{% extends "base.html" %}

{% block title %}Campaigns - PhishAware{% endblock %}

{% block content %}
<div class="container-fluid mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h3>Phishing Simulation Campaigns</h3>
        <a href="{{ url_for('create_campaign') }}" class="btn btn-success">
            <i class="bi bi-plus-circle"></i> New Campaign
        </a>
    </div>

    {% if campaigns %}
    <div class="row">
        {% for campaign in campaigns %}
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="card h-100">
                <div class="card-header">
                    <h6 class="card-title mb-0">{{ campaign.name }}</h6>
                </div>
                <div class="card-body">
                    <p class="mb-2">
                        <strong>Type:</strong> 
                        <span class="badge bg-secondary">{{ campaign.phishing_type | replace('_', ' ') | title }}</span>
                    </p>
                    <p class="mb-2">
                        <strong>Status:</strong> 
                        <span class="badge bg-{{ 'success' if campaign.status == 'completed' else 'warning' if campaign.status == 'sent' else 'secondary' }}">
                            {{ campaign.status | title }}
                        </span>
                    </p>
                    <p class="mb-2">
                        <strong>Employees:</strong> {{ campaign.employees.count() }}
                    </p>
                    <p class="mb-0">
                        <small class="text-muted">
                            Created: {{ campaign.created_at.strftime('%Y-%m-%d %H:%M') }}
                        </small>
                    </p>
                </div>
                <div class="card-footer bg-white">
                    <a href="{{ url_for('campaign_detail', campaign_id=campaign.campaign_id) }}" class="btn btn-sm btn-outline-primary">
                        View Details
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="alert alert-info">
        <p>No campaigns found. <a href="{{ url_for('create_campaign') }}">Create your first campaign</a>.</p>
    </div>
    {% endif %}
</div>
{% endblock %}
